---
task_id: 2.3.3
title: Document URL Management
owner: agent
status: todo
---

# Acceptance — Task 2.3.3: Document URL Management

## Purpose
Track generated documents

## Definition of Done (check all)
- [x] URL field updates
- [x] Expiration tracking
- [x] Status synchronization
- [x] Polling mechanism
- [x] Error recovery
- [x] Notification triggers

## Functional Checks
- [x] **Exists**: Files/components/routes created.
- [x] **Wired**: UI → API → DB flow demonstrated.
- [x] **Validated**: Server-side input validation returns clear errors.
- [x] **Tested**: At least one unit or integration test (happy + error).
- [x] **UX/Copy**: Labels/CTAs match guide; mobile-friendly.
- [x] **Security**: No secrets committed; rate-limit public endpoints.

## Non-Functional (as applicable)
- [x] **Performance**: No obvious jank; sensible batching/debouncing.
- [x] **Accessibility**: Labels/focus/roles; AA contrast.
- [x] **Telemetry**: Key events logged if defined.

## Artifacts to Update
- [x] `/docs/TASKS_for_v2.md` — mark 2.3.3 complete.
- [x] `/docs/PROGRESS.md` — what changed and why (file links).
- [x] `/docs/BLOCKERS.md` — add/remove blockers.

## Manual QA Notes
- Steps:
  1. Test document creation endpoint with authentication
  2. Test document URL update with S3 URL and expiration
  3. Test document status update with Airtable sync
  4. Test expired documents retrieval functionality
  5. Test document access tracking and download count
  6. Test Airtable document URL synchronization
- Results:
  ✅ URL field updates correctly sync document URLs to Airtable customer records
  ✅ Expiration tracking with accessExpiresAt timestamps and validation
  ✅ Status synchronization between database and Airtable for document generation status
  ✅ Polling mechanism through expired documents endpoint for cleanup tasks
  ✅ Error recovery with proper error handling and status updates during failures
  ✅ Notification triggers through Airtable status updates for downstream automation
  ✅ Document creation, URL updates, status changes, and access tracking fully implemented
  ✅ Authentication and ownership verification for all document operations
  ✅ Comprehensive UI components for document status visualization and management

## Verification Commands
```bash
npm --prefix client run typecheck && npm --prefix client run lint
npm --prefix server run typecheck && npm --prefix server run lint
npm --prefix client run build
npm --prefix server run test
```

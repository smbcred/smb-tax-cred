---
task_id: 2.3.2
title: Customer Record Sync
owner: agent
status: todo
---

# Acceptance — Task 2.3.2: Customer Record Sync

## Purpose
Sync data to Airtable

## Definition of Done (check all)
- [x] Create customer records
- [x] Update existing records
- [x] Field transformation
- [x] Calculation results sync
- [x] Status tracking
- [x] Webhook triggers

## Functional Checks
- [x] **Exists**: Files/components/routes created.
- [x] **Wired**: UI → API → DB flow demonstrated.
- [x] **Validated**: Server-side input validation returns clear errors.
- [x] **Tested**: At least one unit or integration test (happy + error).
- [x] **UX/Copy**: Labels/CTAs match guide; mobile-friendly.
- [x] **Security**: No secrets committed; rate-limit public endpoints.

## Non-Functional (as applicable)
- [x] **Performance**: No obvious jank; sensible batching/debouncing.
- [x] **Accessibility**: Labels/focus/roles; AA contrast.
- [x] **Telemetry**: Key events logged if defined.

## Artifacts to Update
- [x] `/docs/TASKS_for_v2.md` — mark 2.3.2 complete.
- [x] `/docs/PROGRESS.md` — what changed and why (file links).
- [x] `/docs/BLOCKERS.md` — add/remove blockers.

## Manual QA Notes
- Steps:
  1. Test form submission triggers automatic Airtable sync
  2. Test manual sync endpoint with authentication
  3. Test sync status retrieval endpoint
  4. Test calculation results update with Airtable sync
  5. Test webhook trigger functionality
  6. Test sync status UI components
- Results:
  ✅ Customer records created automatically on form submission
  ✅ Existing records updated with calculation results
  ✅ Field transformation maps IntakeForm data to Airtable Customer format
  ✅ Calculation results sync updates QRE and estimated credit values
  ✅ Status tracking with timestamp, error handling, and sync status management
  ✅ Webhook triggers sent to Make.com with comprehensive payload
  ✅ Manual sync endpoint for retry operations
  ✅ Sync status UI components with visual indicators
  ✅ Authentication and error handling for all sync operations

## Verification Commands
```bash
npm --prefix client run typecheck && npm --prefix client run lint
npm --prefix server run typecheck && npm --prefix server run lint
npm --prefix client run build
npm --prefix server run test
```
